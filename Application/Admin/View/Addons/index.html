<extend name="Public/base"/>

<block name="body">
    <div class="panel admin-panel">
    <form method="post" class="form-x">
    	<div class="panel-head"><strong>插件管理</strong></div>
        <table class="table table-hover">
        	<tr>
                <th>插件名称</th>
                <th>标识</th>
                <th>描述</th>
                <th width="80px">状态</th>
                <th width="120px">作者</th>
                <th width="60px">版本</th>
                <th width="120px">操作</th>
            </tr>
           	<notempty name="_list">
            <volist name="_list" id="vo">
            <tr>
                <td>{$vo.title}</td>
                <td>{$vo.name}</td>
                <td>{$vo.description}</td>
                <td>{$vo.status_text|default="未安装"}</td>
                <td>{$vo.author|default="未知"}</td>
                <td>{$vo.version}</td>
                <td>
                    <empty name="vo.uninstall">
                        <?php
                            $class	= get_addon_class($vo['name']);
                            if(!class_exists($class)){
                                $has_config = 0;
                            }else{
                                $addon = new $class();
                                $has_config = count($addon->getConfig());
                            }
                        ?>
                        <?php if ($has_config): ?>
                            <a href="{:U('config',array('id'=>$vo['id']))}">设置</a>
                        <?php endif ?>
                    <?php if ($vo['status'] >=0): ?>
                        <eq name="vo.status" value="0">
                            <a class="ajax-get" href="{:U('enable',array('id'=>$vo['id']))}">启用</a>
                        <else />
                            <a class="ajax-get" href="{:U('disable',array('id'=>$vo['id']))}">禁用</a>
                        </eq>
                    <?php endif ?>
                        {// <eq name="vo.author" value="thinkphp">}
                            <a class="ajax-get" href="{:U('uninstall?id='.$vo['id'])}">卸载</a>
                        {// </eq>}
                    <else />
                        <a class="ajax-get" href="{:U('install?addon_name='.$vo['name'])}">安装</a>
                    </empty>
                </td>
            </tr>
            </volist>
            <else/>
            <td colspan="7"> aOh! 暂时还没有内容! </td>
            </notempty>
        </table>
         <div class="panel-foot text-center">
         	<div class="page">{$_page}</div>
        </div>
        </form>
    </div>
</block>